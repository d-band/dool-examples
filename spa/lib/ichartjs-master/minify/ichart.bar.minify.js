iChart.Bar=iChart.extend(iChart.Chart,{configure:function(){iChart.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(a,b,c,d,e){a.labels.push(new iChart.Text(iChart.apply(a.get("label"),{id:b,text:c,textAlign:"right",textBaseline:"middle",originx:d,originy:e}),a))},doParse:function(a,b,c,d){a.doActing(a,b,d,c)},engine:function(a){var b=a.get("bar_height"),c=a.get("bar_space"),d=a.coo.getScale(a.get("scaleAlign")),e=a.coo.valid_width,f=b/2,g="complex"!=a.dataType?b+c:a.data.length*b+c,h=a.coo.get("x_start")+d.basic*e,i=a.coo.get(a.X)-a.get("text_space")-a.coo.get("axis.width")[3],j=a.coo.get("y_start")+c;a.doEngine(a,b,c,d,e,f,g,h,i,j)},doAnimation:function(a,b,c){c.labels.each(function(a){a.draw()});c.rectangles.each(function(d){d.push(c.W,Math.ceil(c.animationArithmetic(a,0,d.width,b)));d.drawRectangle()})},doConfig:function(){iChart.Bar.superclass.doConfig.call(this);var a=this._();a.rectangles=[];a.labels=[];a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.components.push(a.labels);a.components.push(a.rectangles);a.coo=iChart.Coordinate.coordinate_.call(a,function(){var b=a.data.length,c=a.get("coordinate.valid_height_value"),d,e,f;"complex"==a.dataType?(f=a.get("labels").length,b=f*b+(a.is3D()?(b-1)*f*a.get("group_fator"):0),d=Math.floor(c/(f+1+b)),e=a.pushIf("bar_height",d),f+=1):("stacked"==a.dataType&&(b=a.get("labels").length),d=Math.floor(2*c/(3*b+1)),e=a.pushIf("bar_height",d),f=b+1);e*b>c&&(e=a.push("bar_height",d));a.push("bar_space",(c-e*b)/f)});a.push("sub_option.height",a.get("bar_height"));a.push("sub_option.valueAlign",a.R);a.push("sub_option.tipAlign",a.R)}});