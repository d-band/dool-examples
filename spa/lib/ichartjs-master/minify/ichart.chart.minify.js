(function(f){function z(a){"string"===typeof a&&(a=f(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=a;this.c=this.canvas.getContext("2d")}var s=Math.PI,w=s/90,B=w/2,v=Math.ceil,q=Math.floor,x=2*s,t=Math.max,u=Math.min,r=Math.sin,p=Math.cos,i=function(a,b){return 1==a?q(b)+0.5:Math.round(b)},A=function(a,b,c,d){var g=b.x,h=b.y,l=a[c-1],j=a[c+1],f,e;if(c<a.length-1){var a=l.y,c=j.y,m;f=(d*g+l.x)/(d+1);e=(d*h+a)/(d+1);j=(d*g+j.x)/(d+1);d=(d*h+c)/(d+1);m=(d-e)*(j-g)/(j-f)+h-d;e+=m;d+=m;e>a&&e>h?(e=t(a,h),d=2*h-e):e<a&&e<h&&(e=u(a,h),d=2*h-e);d>c&&d>h?(d=t(c,h),e=2*h-d):d<c&&d<h&&(d=u(c,h),e=2*h-d);b.rcx=j;b.rcy=d}return[l.rcx||l.x,l.rcy||l.y,f||g,e||h,g,h]},y=function(a){return f.isNumber(a)?a:f.parseFloat(a,a)},C=function(a,b){var c,d=0,g,h=0,l=!1,j=b.get("labels");b.data=a;if("simple"==b.dataType)b.total=0,a.each(function(a){a.background_color=a.color;d=a.value||0;if(f.isArray(d)){var e=0;h=d.length>h?d.length:h;for(var j=0;j<d.length;j++)d[j]=y(d[j]),e+=d[j],l||(c=g=d[j],l=!0),c=t(d[j],c),g=u(d[j],g);a.total=e}else d=y(d),a.value=d,b.total+=d,l||(c=g=d,l=!0),c=t(d,c),g=u(d,g)},b),f.isArray(j)&&(h=j.length>h?j.length:h),b.push("maxItemSize",h);else if("stacked"==b.dataType||"complex"==b.dataType){var n=j.length,e,m,k,i="stacked"==b.dataType;if(0==n)for(var n=a[0].value.length,o=0;o<n;o++)j.push("");b.columns=[];for(o=0;o<n;o++)e=[],m=0,a.each(function(b,h){if(d=b.value[o])b.value[o]=d=y(d,d),m+=d,i?k=a[h].color:(k=b.color,l||(c=g=d,l=!0),c=t(d,c),g=u(d,g)),e.push(f.applyIf({name:b.name,value:b.value[o],background_color:k,color:k},f.isArray(b.extra)?b.extra[o]||{}:b))}),i&&(l||(c=g=d,l=!0),c=t(m,c),g=u(m,g)),b.columns.push({total:m,name:j[o],item:e})}b.push("minValue",g);b.push("maxValue",c);b.doConfig();b.initialization=!0};z.prototype={getContext:function(){return this.c},css:function(a,b){if(f.isDefined(b))this.canvas.style[a]=b;else return this.canvas.style[a]},ellipse:function(a,b,c,d,g,h,l,j,f,e,m,k,i,o){i=!!i;this.save().gCo(o).strokeStyle(j,f,e).shadowOn(m).fillStyle(l).moveTo(a,b).beginPath();for(i&&this.moveTo(a,b);g<=h;)this.lineTo(a+c*p(g),b+d*r(g)),g+=w;return this.lineTo(a+c*p(h),b+d*r(h)).closePath().stroke(j).fill(l).restore()},arc:function(a,b,c,d,g,h,l,j,f,e,m,k,i,o){j&&(c-=q(f/2));if(0>=c)return this;this.save().gCo(o).strokeStyle(j,f,e).fillStyle(l).beginPath();d?(this.moveTo(a+p(g)*(c-d),b+r(g)*(c-d)).lineTo(a+p(g)*c,b+r(g)*c),this.c.arc(a,b,c,g,h,k),this.lineTo(a+p(h)*(c-d),b+r(h)*(c-d)),this.c.arc(a,b,c-d,h,g,!k)):(this.c.arc(a,b,c,g,h,k),i&&this.lineTo(a,b));this.closePath();j?this.shadowOn(m).stroke(j).shadowOff().fill(l):this.shadowOn(m).fill(l);return this.restore()},sector:function(a,b,c,d,g,h,l,j,f,e,m,k,i,o){m&&this.arc(a,b,c,d,g,h,l,j,f,e,m,k,!i,!o);return this.arc(a,b,c,d,g,h,l,j,f,e,!1,k,!i)},sector3D:function(){var a=function(a,b,c,d,n,e,m,k,i){var m=function(e,f){this.lineTo(a+c*p(e),b+(f||0)+d*r(e))},o=n;for(this.fillStyle(f.dark(i)).moveTo(a+c*p(n),b+d*r(n)).beginPath();o<=e;)m.call(this,o),o+=w;m.call(this,e);this.lineTo(a+c*p(e),b+k+d*r(e));for(o=e;o>=n;)m.call(this,o,k),o-=w;m.call(this,n,k);this.lineTo(a+c*p(n),b+d*r(n)).closePath().fill(!0)},b=function(a,b,c,d,f,e,m,k){c=a+c*p(m);d=b+e+d*r(m);this.moveTo(a,b).beginPath().fillStyle(k).lineTo(a,b+e).lineTo(c,d).lineTo(c,d-e).lineTo(a,b).closePath().fill(!0)},c=function(a,c,d,j,n,e,m,k,i){var o=f.quadrantd(n),q=f.quadrantd(e),i=f.dark(i);(1==o||2==o)&&b.call(this,a,c,d,j,m,k,n,i);(0==q||3==q)&&b.call(this,a,c,d,j,m,k,e,i)},d=function(b,d,l,j,f,e,m,k,i,o,q,r,p){this.ellipse(b,d+m,l,j,f,e,k,i,o,q,r,p,!0);c.call(this,b,d,l,j,f,e,p,m,k);this.ellipse(b,d,l,j,f,e,k,i,o,q,!1,p,!0);a.call(this,b,d,l,j,f,e,p,m,k);return this};d.layerPaint=c;d.sPaint=a;d.layerDraw=b;return d}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c,d){if(a&&(b&&(this.c.lineWidth=b),c&&(this.c.strokeStyle=c),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,d,g,h){c&&this.c.arc(a,b,c,d,g,h);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,c,d,g,h,f){var h=h.toLowerCase(),j=a,i=b,e=!h.indexOf("linear"),h=h.substring(14);if(e){switch(h){case "updown":i+=d;break;case "downup":b+=d;break;case "leftright":j+=c;break;case "rightleft":a+=c;break;default:return g[0]}return this.avgLinearGradient(a,b,j,i,g)}a+=c/2;b+=d/2;return this.avgRadialGradient(a,b,f||0,a,b,c>d?d:c,"outin"==h?g.reverse():g)},avgLinearGradient:function(a,b,c,d,g){a=this.createLinearGradient(a,b,c,d);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createLinearGradient:function(a,b,c,d){return this.c.createLinearGradient(a,b,c,d)},avgRadialGradient:function(a,b,c,d,g,h,f){a=this.createRadialGradient(a,b,c,d,g,h);for(b=0;b<f.length;b++)a.addColorStop(b/(f.length-1),f[b]);return a},createRadialGradient:function(a,b,c,d,g,h){return this.c.createRadialGradient(a,b,c,d,g,h)},text:function(a,b,c,d,g,h,f,j,i,e,m,k){return this.save().textStyle(h,f,j).fillText(a,b,c,d,g,i,e,m,k).restore()},fillText:function(a,b,c,d,g,h,f,j,n){a=a.toString();if(!a||!a.length)return this;d=d||!1;h=h||"lr";f=f||16;b=i(0,b);c=i(0,c);a=a.split("tb"==h?"":"\n");1<a.length&&("middle"==this.c.textBaseline?c-=(a.length-1)*f/2:"bottom"==this.c.textBaseline&&(c-=(a.length-1)*f));this.save().fillStyle(g).translate(b,c).rotate(B*n).shadowOn(j);a.each(function(a,g){try{d&&0<d?this.c.fillText(a,0,g*f,d):this.c.fillText(a,0,g*f)}catch(h){console.log(h.message+"["+a+","+b+","+c+"]")}},this);return this.restore()},measureText:function(a){var a=a.split("\n"),b=0;a.each(function(a){b=t(this.measureText(a).width,b)},this.c);return b},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(a,b,c,d,g,h,l,j,n,e,m,k){a=i(e,a);b=i(e,b);l=l&&0<l?l:g;d=b-l*d;c=i(e,a+l*c);d=i(e,d);k&&(this.polygon(j,n,e,m,k,!1,[{x:a,y:b},{x:c,y:d},{x:c+g,y:d},{x:a+g,y:b}]),this.polygon(j,n,e,m,k,!1,[{x:a,y:b},{x:a,y:b+h},{x:a+g,y:b+h},{x:a+g,y:b}]),this.polygon(j,n,e,m,k,!1,[{x:a+g,y:b},{x:c+g,y:d},{x:c+g,y:d+h},{x:a+g,y:b+h}]));this.polygon(f.dark(j),n,e,m,!1,!1,[{x:a,y:b},{x:c,y:d},{x:c+g,y:d},{x:a+g,y:b}]);this.polygon(j,n,e,m,!1,!1,[{x:a,y:b},{x:a,y:b+h},{x:a+g,y:b+h},{x:a+g,y:b}]);this.polygon(f.dark(j),n,e,m,!1,!1,[{x:a+g,y:b},{x:c+g,y:d},{x:c+g,y:d+h},{x:a+g,y:b+h}]);return this},cube3D:function(a,b,c,d,g,h,l,j,n,e,m,k){a=i(e,a);b=i(e,b);j=!j||0==j?h:j;g?(d=f.vectorP2P(c,d),c=a+j*d.x,d=b-j*d.y):(c=a+j*c,d=b-j*d);for(;6>k.length;)k.push(!1);c=i(e,c);d=i(e,d);j=[];0>d?f.isObject(k[4])&&j.push(f.applyIf({points:[{x:a,y:b-l},{x:c,y:d-l},{x:c+h,y:d-l},{x:a+h,y:b-l}]},k[4])):f.isObject(k[0])&&j.push(f.applyIf({points:[{x:a,y:b},{x:c,y:d},{x:c+h,y:d},{x:a+h,y:b}]},k[0]));f.isObject(k[1])&&j.push(f.applyIf({points:[{x:c,y:d},{x:c,y:d-l},{x:c+h,y:d-l},{x:c+h,y:d}]},k[1]));f.isObject(k[2])&&j.push(f.applyIf({points:[{x:a,y:b},{x:a,y:b-l},{x:c,y:d-l},{x:c,y:d}]},k[2]));f.isObject(k[3])&&j.push(f.applyIf({points:[{x:a+h,y:b},{x:a+h,y:b-l},{x:c+h,y:d-l},{x:c+h,y:d}]},k[3]));0>d?f.isObject(k[0])&&j.push(f.applyIf({points:[{x:a,y:b},{x:c,y:d},{x:c+h,y:d},{x:a+h,y:b}]},k[0])):f.isObject(k[4])&&j.push(f.applyIf({points:[{x:a,y:b-l},{x:c,y:d-l},{x:c+h,y:d-l},{x:a+h,y:b-l}]},k[4]));f.isObject(k[5])&&j.push(f.applyIf({points:[{x:a,y:b},{x:a,y:b-l},{x:a+h,y:b-l},{x:a+h,y:b}]},k[5]));j.each(function(a){this.polygon(a.color,n,e,m,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,d,g,h,f,j,n,e){this.save().strokeStyle(b,c,d).beginPath().fillStyle(a).globalAlpha(h).shadowOn(g).moveTo(f[0].x,f[0].y);if(j){this.moveTo(i(c,e[0].x),i(c,e[0].y)).lineTo(i(c,f[0].x),i(c,f[0].y));for(d=1;d<f.length;d++)this.bezierCurveTo(A(f,f[d],d,n));this.lineTo(i(c,e[1].x),i(c,e[1].y))}else for(d=1;d<f.length;d++)this.lineTo(i(c,f[d].x),i(c,f[d].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,c,d){if(!b)return this;this.save().gCo(d).beginPath().strokeStyle(!0,b,c).moveTo(i(b,a[0]),i(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(i(b,a[c]),i(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,c){return this.save().beginPath().strokeStyle(!0,b,c).moveTo(i(b,a[0].x),i(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,c,d,g){if(!b)return this;this.save().beginPath().strokeStyle(!0,b,c).moveTo(i(b,a[0].x),i(b,a[0].y));for(c=1;c<a.length;c++)d?this.bezierCurveTo(A(a,a[c],c,g||1.5)):this.lineTo(i(b,a[c].x),i(b,a[c].y));return this.stroke(!0).restore()},dotted:function(a,b,c,d,g,h,l,j,n){if(!g)return this;var a=i(g,a),b=i(g,b),c=i(g,c),d=i(g,d),e=f.distanceP2P(a,b,c,d),m;if(0>=l||e<=l||a!=c&&b!=d)return this.line(a,b,c,d,g,h,n);if(a>c||b>d)m=a,a=c,c=m,m=b,b=d,d=m;this.save().gCo(n).strokeStyle(!0,g,h).beginPath().moveTo(a,b);g=l*(j||1);h=q(e/(l+g));e=e-h*(l+g)>l;j=b==d;h=e?h+1:h;for(n=1;n<=h;n++)this.lineTo(j?a+l*n+g*(n-1):a,j?b:b+l*n+g*(n-1)).moveTo(j?a+(l+g)*n:a,j?b:b+(l+g)*n);e||this.lineTo(c,d);return this.stroke(!0).restore()},line:function(a,b,c,d,g,f,l){if(!g)return this;this.save().gCo(l);return this.beginPath().strokeStyle(!0,g,f).moveTo(i(g,a),i(g,b)).lineTo(i(g,c),i(g,d)).stroke(!0).restore()},round:function(a,b,c,d,g,f){return this.arc(a,b,c,0,0,x,d,!!f,g,f)},round0:function(a,b,c,d,f){return this.arc(a.x,a.y,b,0,0,x,c,!!f,d,f)},fillRect:function(a,b,c,d){this.c.fillRect(a,b,c,d);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,d){c=c||this.canvas.width;d=d||this.canvas.height;this.c.clearRect(a||0,b||0,c,d);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(a,b,c,d,g,h,l,j,n){g=g||{enable:0};if(g.enable){var e=g.width,m=g.color,k=g.radius,p=f.isNumber(e),e=f.parsePadding(e);e[0]==e[1]&&e[1]==e[2]&&e[2]==e[3]&&(p=!0);j=j?1:-1;c+=j*(e[1]+e[3])/2;d+=j*(e[0]+e[2])/2;a-=j*(e[3]/2);b-=j*(e[0]/2);e=p?e[0]:e;k=!p||!k||0==k||"0"==k?0:f.parsePadding(k)}this.save().gCo(n).fillStyle(h).strokeStyle(p,e,m);k?this.beginPath().moveTo(i(e,a+k[0]),i(e,b)).lineTo(i(e,a+c-k[1]),i(e,b)).arc2(i(e,a+c-k[1]),i(e,b+k[1]),k[1],3*s/2,x).lineTo(i(e,a+c),i(e,b+d-k[2])).arc2(i(e,a+c-k[2]),i(e,b+d-k[2]),k[2],0,s/2).lineTo(i(e,a+k[3]),i(e,b+d)).arc2(i(e,a+k[3]),i(e,b+d-k[3]),k[3],s/2,s).lineTo(i(e,a),i(e,b+k[0])).arc2(i(e,a+k[0]),i(e,b+k[0]),k[0],s,3*s/2).closePath().shadowOn(l).stroke(e).shadowOff().fill(h):!g.enable||p?(e&&g.enable&&(this.shadowOn(l).c.strokeRect(a,b,c,d),this.shadowOff()),h&&this.fillRect(a,b,c,d)):(e&&(m=f.isArray(m)?m:[m,m,m,m],this.shadowOn(l).line(a+c,b+e[0]/2,a+c,b+d-e[0]/2,e[1],m[1],0).line(a,b+e[0]/2,a,b+d-e[0]/2,e[3],m[3],0).line(q(a-e[3]/2),b,a+c+e[1]/2,b,e[0],m[0],0).line(q(a-e[3]/2),b+d,a+c+e[1]/2,b+d,e[2],m[2],0).shadowOff()),h&&this.beginPath().moveTo(q(a+e[3]/2),q(b+e[0]/2)).lineTo(v(a+c-e[1]/2),b+e[0]/2).lineTo(v(a+c-e[1]/2),v(b+d-e[2]/2)).lineTo(q(a+e[3]/2),v(b+d-e[2]/2)).lineTo(q(a+e[3]/2),q(b+e[0]/2)).closePath().fill(h));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(a,b,c){f.Event.addEvent(this.canvas,a,b,c)}};f.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};f.Chart=f.extend(f.Painter,{configure:function(){f.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","resize","animating");this.T=null;this.show=this.Animationed=this.Combination=this.Rendered=!1;this.data=[];this.plugins=[];this.components=[];this.oneways=[];this.total=0;this.ICHARTJS_CHART=!0},toDataURL:function(a){return this.T.toDataURL(a)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(a){a.segmentRect();a.coo&&!a.ILLUSIVE_COO&&a.coo.draw();a.doAnimation(a.variable.animation.time,a.duration,a);a.plugins.each(function(b){b.A_draw&&(b.variable.animation.animating=!0,b.variable.animation.time=a.variable.animation.time,b.draw(),b.variable.animation.animating=!1)});a.Combination||(a.oneways.each(function(a){a.draw()}),a.variable.animation.time<a.duration?(a.variable.animation.time++,f.requestAnimFrame(function(){a.animation(a)})):f.requestAnimFrame(function(){a.Animationed=!0;a.plugins.each(function(a){a.Animationed=!0});a.processAnimation=!1;a.draw();a.plugins.each(function(a){a.processAnimation=!1});a.fireEvent(a,"afterAnimation",[a])}))},runAnimation:function(a){a.fireEvent(a,"beforeAnimation",[a]);a.A_draw||(a.variable.animation={type:0,time:0,queue:[]});a.processAnimation=!0;a.animation(a)},doSort:function(){var a=function(a,c){return(f.isArray(a)?a.zIndex||0:a.get("z_index"))>(f.isArray(c)?c.zIndex||0:c.get("z_index"))};this.components.sor(a);this.oneways.sor(a)},commonDraw:function(a,b){a.show=!1;a.redraw||(f.Assert.isTrue(a.Rendered,a.type+" has not rendered"),f.Assert.isTrue(a.data&&0<a.data.length,a.type+"'s data is empty"),f.Assert.isTrue(a.initialization,a.type+" Failed to initialize"),a.doSort());a.redraw=!0;!a.Animationed&&a.get("animation")?a.runAnimation(a):(a.segmentRect(),a.components.eachAll(function(a){a.draw(b)}),a.components.eachAll(function(a){a.last&&a.last(a)}),a.oneways.each(function(a){a.draw()}),a.show=!0)},plugin:function(a){var b=this._();a.inject(b);a.ICHARTJS_CHART&&(a.Combination=!0,a.setUp());b.get("animation")||a.push("animation",!1);a.duration=b.duration;b.register(a);b.plugins.push(a)},destroy:function(a){a.components.eachAll(function(a){a.destroy()});a.oneways.each(function(a){a.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(a,b){if(a.get("fit")){var c=window.innerWidth,d=window.innerHeight,g=f.getDoc().body.style;g.padding="0px";g.margin="0px";g.overflow="hidden";a.push(a.W,c);a.push(a.H,d)}a.canvasid=f.uid(a.type);a.shellid="shell-"+a.canvasid;c=[];c.push("<div id='");c.push(a.shellid);c.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>");c.push("<canvas id= '");c.push(a.canvasid);c.push("' style='-webkit-text-size-adjust: none;'>");c.push("<p>Your browser does not support the canvas element</p></canvas>");c.push("</div>");b.innerHTML=c.join("");a.shell=f(a.shellid);a.T=a.target=new z(a.canvasid);a.size(a);a.Rendered=!0},setUp:function(){var a=this._();a.redraw=!1;a.T.clearRect();a.initialization=!1;a.initialize()},load:function(a){var b=this._();b.push("data",a||[]);b.setUp();(b.Combination?b.root:b).draw()},resize:function(a,b){var a=f.parseFloat(a),b=f.parseFloat(b),c=this._();c.Combination||(c.width=c.push(c.W,a),c.height=c.push(c.H,b),c.size(c));c.set(c.fireEvent(c,"resize",[a,b]));c.setUp();c.plugins.eachAll(function(c){c.Combination&&c.resize(a,b)});c.Combination||c.draw()},size:function(a){a.T.canvas.width=a.width=a.pushIf(a.W,400);a.T.canvas.height=a.height=a.pushIf(a.H,300);a.shell.style.width=a.width+"px";a.shell.style.height=a.height+"px"},initialize:function(){var a=this._(),b=a.get("data"),c=a.get("render");a.push(a.X,null);a.push(a.Y,null);a.Combination?(f.apply(a.options,f.clone([a.W,a.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],a.root.options,!0)),a.width=a.get(a.W),a.height=a.get(a.H),a.shell=a.root.shell,a.Rendered=!0):a.Rendered||c&&a.create(a,f(c));a.Rendered&&!a.initialization&&(b&&0<b.length?C.call(a,b,a):f.isString(a.get("url"))&&a.ajax.call(a,a.get("url"),function(b){a.push("data",b);a.initialize();a.draw()}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(a){a.T.strokeStyle(!0,0,a.get("strokeStyle"),a.get("lineJoin"));a.processAnimation=a.get("animation");f.isFunction(a.get("doAnimation"))&&(a.doAnimation=a.get("doAnimation"));a.animationArithmetic=f.getAA(a.get("animation_timing_function"));var b=a.variable.event,c=a.Combination,d=!a.get("turn_off_touchmove")&&!c,g=!f.touch&&a.get("default_mouseover_css")&&!c,h,i=f.touch?["touchstart","touchmove"]:["click","mousemove"];a.stopEvent=!1;a.A_draw=c&&a.processAnimation;f.register(a);c||i.each(function(b){a.T.addEvent(b,function(c){a.processAnimation||a.stopEvent||c.targetTouches&&c.targetTouches.length!=1||a.fireEvent(a,b,[a,f.Event.fix(c)])},false)});a.on(i[0],function(a,c){a.components.eachAll(function(a){if(a.ICHARTJS_CHART){if(a.fireEvent(a,i[0],[a,c])){b.click=true;return false}}else{var d=a.isMouseOver(c);if(d.valid){b.click=true;a.fireEvent(a,"click",[a,c,d]);return!c.stopPropagation}}});if(b.click){d&&c.event.preventDefault();b.click=false;return true}});if(!f.touch||d)if(a.on(i[1],function(a,c){h=false;a.components.eachAll(function(a){if(a.ICHARTJS_CHART){if(a.fireEvent(a,i[1],[a,c])){h=true;return false}}else{var b=a.variable.event,d=a.isMouseOver(c);if(d.valid){h=h||a.atomic;if(!b.mouseover){b.mouseover=true;a.fireEvent(a,"mouseover",[a,c,d])}a.fireEvent(a,"mousemove",[a,c,d]);if(d.stop)return false}else if(b.mouseover){b.mouseover=false;a.fireEvent(a,"mouseout",[a,c,d])}return!c.stopPropagation}});if(b.mouseover){c.event.preventDefault();if(!h){b.mouseover=false;a.fireEvent(a,"mouseout",[a,c])}return b.mouseover}if(h){b.mouseover=h;a.fireEvent(a,"mouseover",[a,c])}}),g)a.on("mouseover",function(){a.T.css("cursor","pointer")}).on("mouseout",function(){a.T.css("cursor","default")});f.applyIf(a.get("sub_option"),f.clone(["shadow","tip"],a.options,!0));a.Combination||(a.bg=new f.Custom({z_index:-1,drawFn:function(){a.T.box(0,0,a.width,a.height,a.get("border"),a.get("f_color"),0,0,true)}}),a.duration=v(a.get("animation_duration")*f.FRAME/1E3));a.oneWay=f.emptyFn},originXY:function(a,b,c){var d=a.get("align");d==a.L?a.pushIf(a.X,b[0]):d==a.R?a.pushIf(a.X,b[1]):a.pushIf(a.X,b[2]);a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,c[0]+a.get("offsety"));return{x:a.x,y:a.y}},getPercent:function(a,b){return this.get("showpercent")?(100*(a/(b||this.total||1))).toFixed(this.get("decimalsnum"))+"%":a},doActing:function(a,b,c,d,g){var h=!!a.get("communal_acting"),i=a.getPercent(b.value,b.total);a.push(h?"sub_option":"communal_acting",f.clone(a.get(h?"communal_acting":"sub_option"),!0));f.merge(a.get("sub_option"),b);f.merge(a.get("sub_option"),c);a.push("sub_option.value",i);a.push("sub_option.value_",b.value);a.get("sub_option.tip.enable")&&(a.push("sub_option.tip.text",g||b.name+" "+i),a.push("sub_option.tip.name",b.name),a.push("sub_option.tip.index",d),a.push("sub_option.tip.value",b.value),a.push("sub_option.tip.total",b.total||a.total))},register:function(a){a.id=f.uid(a.type);this.components.push(a);return a},remove:function(a,b){b&&a.components.each(function(c,d){if(b.id==c.id)return a.components.splice(d,1),!1})},doConfig:function(){f.Chart.superclass.doConfig.call(this);var a=this._();a.destroy(a);a.oneways.length=0;a.oneWay(a);a.push("communal_acting",0);if(!a.Combination){a.oneways.push(a.bg);a.push("r_originx",a.width-a.get("padding_right"));a.push("b_originy",a.height-a.get("padding_bottom"));a.applyGradient();f.isString(a.get("title"))&&a.push("title",f.applyIf({text:a.get("title")},a.default_.title));f.isString(a.get("subtitle"))&&a.push("subtitle",f.applyIf({text:a.get("subtitle")},a.default_.subtitle));f.isString(a.get("footnote"))&&a.push("footnote",f.applyIf({text:a.get("footnote")},a.default_.footnote));var b=0,c=a.push("l_originx",a.get("padding_left")),d=a.push("t_originy",a.get("padding_top")),g=a.push("client_width",a.width-a.get("hpadding"));if(""!=a.get("title.text")){var h=""!=a.get("subtitle.text"),b=h?a.get("title.height")+a.get("subtitle.height"):a.get("title.height"),d=a.push("t_originy",d+b);a.push("title.originx",c);a.push("title.originy",a.get("padding_top"));a.push("title.maxwidth",g);a.pushIf("title.width",g);a.title=new f.Text(a.get("title"),a);a.oneways.push(a.title);h&&(a.push("subtitle.originx",c),a.push("subtitle.originy",a.get("padding_top")+a.get("title.height")),a.pushIf("subtitle.width",g),a.push("subtitle.maxwidth",g),a.subtitle=new f.Text(a.get("subtitle"),a),a.oneways.push(a.subtitle))}""!=a.get("footnote.text")&&(h=a.get("footnote.height"),b+=h,a.push("b_originy",a.get("b_originy")-h),a.push("footnote.originx",c),a.push("footnote.originy",a.get("b_originy")),a.push("footnote.maxwidth",g),a.pushIf("footnote.width",g),a.footnote=new f.Text(a.get("footnote"),a),a.oneways.push(a.footnote));b=a.push("client_height",a.get(a.H)-a.get("vpadding")-a.pushIf("other_height",b));a.push("minDistance",u(g,b));a.push("maxDistance",t(g,b));a.push("centerx",c+g/2);a.push("centery",d+b/2)}a.get("legend.enable")&&(a.legend=new f.Legend(f.apply({maxwidth:a.get("client_width"),data:a.data},a.get("legend")),a),a.oneways.push(a.legend));a.push("sub_option.tip.wrap",a.push("tip.wrap",a.shell))}})})(iChart);