iChart.Interface=function(){var i=function(a){return iChart.isNumber(a)?a:iChart.parseFloat(a,a)},l=function(a,d){var c=0,b=0,e,f=0;a.each(function(a,d){iChart.merge(a,this.fireEvent(this,"parseData",[this,a,d]));a.color=a.color||iChart.get(d);b=a.value;if(iChart.isArray(b)){var j=0;f=b.length>f?b.length:f;for(var g=0;g<b.length;g++)b[g]=i(b[g]),j+=b[g],e||(e=b),c=b[g]>c?b[g]:c,e=b[g]<e?b[g]:e;a.total=j}else b=i(b),a.value=b,this.total+=b,c=b>c?b:c,e||(e=b),e=b<e?b:e},this);iChart.isNumber(d)?Array.prototype.splice.apply(this.data,[d,0].concat(a)):this.data=this.data.concat(a);this.get("minValue")&&(e=this.get("minValue")<e?this.get("minValue"):e);this.get("maxValue")&&(c=this.get("maxValue")<c?this.get("maxValue"):c);iChart.isArray(this.get("data_labels"))&&(f=this.get("data_labels").length>f?this.get("data_labels").length:f);this.push("maxItemSize",f);this.push("minValue",e);this.push("maxValue",c);this.push("total",this.total);return a},m=function(a){this.data_labels=this.get("data_labels");var d=0,c=0,b,e=this.data_labels.length;this.data=this.data.concat(a);this.data.each(function(a,b){iChart.merge(a,this.fireEvent(this,"parseData",[this,a,b,this.data_labels]));iChart.Assert.equal(a.value.length,e,this.type+":data length and data_labels not corresponding.")},this);for(var f=0;f<e;f++){for(var k=[],h=0;h<this.data.length;h++)b=this.data[h],a=b.value[f],a=i(a,a),b.value[f]=a,b.color||(b.color=iChart.get(h)),this.total+=a,d=a>d?a:d,c=a<c?a:c,k.push({name:b.name,value:b.value[f],color:b.color});this.columns.push({name:this.data_labels[f],item:k})}this.push("minValue",c);this.push("maxValue",d);this.push("total",this.total)};return{parser:function(a,d){if("simple"==this.dataType)return l.call(this,[].concat(a),d);"complex"==this.dataType?m.call(this,[].concat(a),d):this.data=this.data.concat(a)},_3D:function(){if(this.is3D()&&!this.get("xAngle_")){var a=iChart.vectorP2P(this.get("xAngle"),this.get("yAngle"));this.push("xAngle_",a.x);this.push("yAngle_",a.y)}},_2D:function(){},coordinate_:function(){return this.is3D()?(this.push("coordinate.xAngle_",this.get("xAngle_")),this.push("coordinate.yAngle_",this.get("yAngle_")),this.push("coordinate.zHeight",this.get("zHeight")*this.get("bottom_scale")),new iChart.Coordinate3D(iChart.apply({scale:{position:this.get("scaleAlign"),scaleAlign:this.get("scaleAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)):new iChart.Coordinate2D(iChart.apply({scale:{position:this.get("scaleAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate:function(){var a=this.get("client_width"),d=this.get("client_height"),c=this.pushIf("coordinate.width",Math.floor(0.9*a)),b=this.pushIf("coordinate.height",Math.floor(0.9*d));b>d&&(b=this.push("coordinate.height",0.9*d));c>a&&(c=this.push("coordinate.width",0.9*a));this.is3D()&&(b=this.push("coordinate.height",b-(this.get("coordinate.pedestal_height")||22)-(this.get("coordinate.board_deep")||20)));"left"==this.get("align")?this.push("originx",this.get("l_originx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-c):this.push("originx",this.get("centerx")-c/2);this.push("originx",this.get("originx")+this.get("offsetx"));this.push("originy",this.get("centery")-b/2+this.get("offsety"));(!this.get("coordinate.valid_width")||this.get("coordinate.valid_width")>c)&&this.push("coordinate.valid_width",c);(!this.get("coordinate.valid_height")||this.get("coordinate.valid_height")>b)&&this.push("coordinate.valid_height",b);this.x=this.get("originx");this.y=this.get("originy");this.push("coordinate.originx",this.x);this.push("coordinate.originy",this.y)}}}();