iChart.Line=iChart.extend(iChart.Chart,{configure:function(){iChart.Line.superclass.configure.call(this);this.type="line";this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}});this.registerEvent("parsePoint");this.lines=[];this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){iChart.Line.superclass.doConfig.call(this);var a=this._(),f=1==a.data.length;a.lines.length=0;a.lines.zIndex=a.get("z_index");var p=a.pushIf("sub_option.keep_with_coordinate",f);a.get("crosshair.enable")&&(a.pushIf("crosshair.hcross",f),a.push("crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:p}));a.Combination||(a.push("coordinate.crosshair",a.get("crosshair")),a.pushIf("coordinate.scale",[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("labels"),label:a.get("label")}]));a.coo=iChart.Coordinate.coordinate_.call(a);a.Combination&&(a.coo.push("crosshair",a.get("crosshair")),a.coo.doCrosshair(a.coo));var g=f=a.coo.valid_width,l=a.get("maxItemSize")-1,m=f/l,h=a.get("point_space");a.get("proportional_spacing")&&(h&&h<m?g=l*h:a.push("point_space",m));a.push("sub_option.width",g);a.push("sub_option.height",a.coo.valid_height);a.push("sub_option.originx",a.coo.get("x_start")+(f-g)/2);a.push("sub_option.originy",a.coo.get("y_end"));if(a.get("tip.enable")&&!a.mocker&&iChart.isFunction(a.get("tipMocker"))){a.push("sub_option.tip.enable",!1);a.push("tip.invokeOffsetDynamic",!0);var i,q=a.coo.get(a.X),j=a.coo.get(a.Y),n=a.coo.height,d=a.get("tipMockerOffset"),o,b,e,d=iChart.isNumber(d)?0>d?0:1<d?1:d:null;a.push("tip.invokeOffset",function(a,b,c){if(d!=null)c.top=j+(n-b)*d;else{c.top=c.maxTop-(c.maxTop-c.minTop)/3-b;if(b>n||j>c.top)c.top=j}return{left:c.left-a-q>5?c.left-a-5:c.left+5,top:c.top}});var k=a.get("tip.listeners.parseText");k&&delete a.get("tip.listeners").parseText;a.mocker=new iChart.Custom({eventValid:function(d){b=a.lines[0].isEventValid(d);b.hit=o!=b.i;if(b.valid){o=b.i;i=[];a.lines.each(function(a,c){e=a.isEventValid(d);if(c==0)b.minTop=b.maxTop=e.top;else{b.minTop=Math.min(b.minTop,e.top);b.maxTop=Math.max(b.maxTop,e.top)}i.push(k?k(null,e.name,e.value,e.text,e.i):e.name+" "+e.value)});b.text=a.get("tipMocker").call(a,i,b.i)||"tipMocker not return"}return b.valid?b:false}});new iChart.Tip(a.get("tip"),a.mocker);a.register(a.mocker)}a.pushIf("sub_option.area_opacity",a.get("area_opacity"))}});