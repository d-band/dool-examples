iChart.Sector2D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(a,b){if(!b.get("ignored")){if(b.isLabel()&&b.label.isEventValid(a,b.label).valid)return{valid:!0};var c=iChart.distanceP2P(b.x,b.y,a.x,a.y),e=b.get("donutwidth");if(b.r<c||e&&b.r-e>c)return{valid:!1};if(iChart.angleInRange(b.get("startAngle"),b.get("endAngle"),iChart.atan2Radian(b.x,b.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var a=this,b=a.get("middleAngle"),c=iChart.quadrantd(b);return function(e,f){var d=iChart.p2Point(a.x,a.y,b,0.8*a.r);return{left:1<=c&&2>=c?d.x-e:d.x,top:2<=c?d.y-f:d.y}}},doConfig:function(){iChart.Sector2D.superclass.doConfig.call(this);var a=this._();a.r=a.get("radius");a.get("donutwidth")>a.r&&a.push("donutwidth",0);a.applyGradient(a.x-a.r,a.y-a.r,1.8*a.r,1.8*a.r);var b=a.get("middleAngle"),c=a.pushIf("increment",iChart.lowTo(5,a.r/10));a.push("inc_x",c*Math.cos(2*Math.PI-b));a.push("inc_y",c*Math.sin(2*Math.PI-b));c*=2;if(a.get("label"))if(a.get("mini_label"))P2=iChart.p2Point(a.x,a.y,b,a.get("donutwidth")?a.r-a.get("donutwidth")/2:5*a.r/8),a.doText(a,P2.x,P2.y);else{var e=iChart.quadrantd(b),f=iChart.p2Point(a.x,a.y,b,a.r+c),d=iChart.p2Point(a.x,a.y,b,a.r+0.6*c);P2=iChart.p2Point(a.x,a.y,b,a.r);a.doLabel(a,P2.x,P2.y,e,[{x:P2.x,y:P2.y},{x:d.x,y:d.y},{x:f.x,y:f.y}],f.x,f.y,0.4*c)}}});