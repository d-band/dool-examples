iChart.Sector3D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=iChart._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0});this.proxy=!0},isEventValid:function(a,c){if(!c.get("ignored")){if(c.isLabel()&&c.label.isEventValid(a,c.label).valid)return{valid:!0};if(!iChart.inEllipse(a.x-c.x,a.y-c.y,c.a,c.b))return{valid:!1};if(iChart.angleZInRange(c.sA,c.eA,iChart.atan2Radian(c.x,c.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},p2p:function(a,c,b,e){return{x:a+this.a*Math.cos(b)*e,y:c+this.b*Math.sin(b)*e}},tipInvoke:function(){var a=this,c=a.get("middleAngle"),b=iChart.quadrantd(c);return function(e,f){var d=a.p2p(a.x,a.y,c,0.6);return{left:2<=b&&3>=b?d.x-e:d.x,top:3<=b?d.y-f:d.y}}},doConfig:function(){iChart.Sector3D.superclass.doConfig.call(this);var a=this._(),c=a.get("counterclockwise"),b=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");iChart.Assert.isTrue(0<=a.a*a.b,"major&minor");var e=2*Math.PI,f=function(b){for(;0>b;)b+=e;return Math.abs(iChart.atan2Radian(0,0,a.a*Math.cos(b),c?-a.b*Math.sin(b):a.b*Math.sin(b)))},d=a.pushIf("increment",iChart.lowTo(5,a.a/10));a.sA=f.call(a,a.get("startAngle"));a.eA=f.call(a,a.get("endAngle"));a.mA=f.call(a,b);a.push("inc_x",d*Math.cos(e-a.mA));a.push("inc_y",d*Math.sin(e-a.mA));d*=2;if(a.get("label"))if(a.get("mini_label"))d=a.p2p(a.x,a.y,b,0.5),a.doText(a,d.x,d.y);else{var f=iChart.quadrantd(b),g=a.p2p(a.x,a.y,b,d/a.a+1),h=a.p2p(a.x,a.y,b,0.6*d/a.a+1),b=a.p2p(a.x,a.y,b,1);a.doLabel(a,b.x,b.y,f,[{x:b.x,y:b.y},{x:h.x,y:h.y},{x:g.x,y:g.y}],g.x,g.y,0.4*d)}}});